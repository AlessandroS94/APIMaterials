import com.fasterxml.jackson.core.JsonFactory;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.dataformat.smile.SmileFactory;
public class JacksonSample{
public void ground() {
    try {
        ContentSession session = repository.login(new GuestCredentials(), null);
        try {
            Root root = session.getLatestRoot();
            Tree tree = root.getTree(request.getPathInfo());
            request.setAttribute("root", root);
            request.setAttribute("tree", tree);
            super.service(request, response);
        } finally {
            session.close();
        }
    } catch (NoSuchWorkspaceException e) {
        response.sendError(HttpServletResponse.SC_NOT_FOUND);
    } catch (LoginException e) {
        throw new ServletException(e);
    }
}
public void ground() {
    try {
        Root root = (Root) request.getAttribute("root");
        Tree tree = (Tree) request.getAttribute("tree");
        ObjectMapper mapper = new ObjectMapper();
        JsonNode node = mapper.readTree(request.getInputStream());
        if (node.isObject()) {
            post(node, tree);
            root.commit();
            doGet(request, response);
        } else {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST);
        }
    } catch (CommitFailedException e) {
        throw new ServletException(e);
    }
}
}